<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ì§€êµ¬ í™˜ê²½ ì§€í‚¤ê¸° ê²Œì„</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom, #e0f7fa, #b2ebf2);
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }
    
    .game-container {
      width: 100%;
      max-width: 500px;
    }
    
    .game-title {
      text-align: center;
      color: #00796b;
      margin-bottom: 20px;
    }
    
    .game-stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      padding: 10px;
      background-color: rgba(255, 255, 255, 0.7);
      border-radius: 10px;
    }
    
    .stat {
      font-weight: bold;
    }
    
    .score { color: #2e7d32; }
    .level { color: #1565c0; }
    .time { color: #c62828; }
    
    .game-area {
      height: 400px;
      background-color: #e8f5e9;
      border: 3px solid #4caf50;
      border-radius: 10px;
      position: relative;
      overflow: hidden;
    }
    
    .start-screen, .end-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      text-align: center;
      padding: 20px;
    }
    
    .start-screen p, .end-screen p {
      margin-bottom: 20px;
      line-height: 1.5;
      color: #37474f;
    }
    
    .item {
      position: absolute;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.2s;
    }
    
    .item:hover {
      transform: scale(1.1);
    }
    
    .item-name {
      font-size: 10px;
      margin-top: 2px;
    }
    
    .trash { background-color: rgba(244, 67, 54, 0.2); }
    .recycle { background-color: rgba(76, 175, 80, 0.2); }
    .wind { background-color: rgba(33, 150, 243, 0.2); }
    .water { background-color: rgba(3, 169, 244, 0.2); }
    .solar { background-color: rgba(255, 193, 7, 0.2); }
    
    button {
      background-color: #4caf50;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    button:hover {
      background-color: #2e7d32;
    }
    
    .instructions {
      margin-top: 20px;
      padding: 10px;
      background-color: rgba(255, 255, 255, 0.7);
      border-radius: 10px;
    }
    
    .instructions h3 {
      margin-top: 0;
      color: #37474f;
    }
    
    .instructions ul {
      padding-left: 20px;
      margin-bottom: 0;
    }
    
    .instructions li {
      margin-bottom: 5px;
      color: #455a64;
      list-style-type: none;
    }
    
    .icon {
      width: 24px;
      height: 24px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    
    .trophy {
      font-size: 40px;
      color: #ffc107;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <h1 class="game-title">ì§€êµ¬ í™˜ê²½ ì§€í‚¤ê¸°</h1>
    
    <div id="gameStats" class="game-stats" style="display: none;">
      <div class="stat score">ì ìˆ˜: <span id="scoreValue">0</span></div>
      <div class="stat level">ë ˆë²¨: <span id="levelValue">1</span></div>
      <div class="stat time">ì‹œê°„: <span id="timeValue">60</span>ì´ˆ</div>
    </div>
    
    <div id="gameArea" class="game-area">
      <!-- ì‹œì‘ í™”ë©´ -->
      <div id="startScreen" class="start-screen">
        <p>
          í™˜ê²½ì„ ì§€í‚¤ê¸° ìœ„í•œ í–‰ë™ì„ í•˜ì„¸ìš”!<br>
          ì¬í™œìš©í’ˆ, í’ë ¥, ë¬¼ ì ˆì•½, íƒœì–‘ì—´ì€ í´ë¦­í•˜ê³ ,<br>
          ì“°ë ˆê¸°ëŠ” ë°”ë‹¥ì— ë–¨ì–´ì§€ê²Œ ë‘ì„¸ìš”.
        </p>
        <button id="startButton">ê²Œì„ ì‹œì‘í•˜ê¸°</button>
      </div>
      
      <!-- ê²Œì„ ë í™”ë©´ -->
      <div id="endScreen" class="end-screen" style="display: none;">
        <div class="trophy">ğŸ†</div>
        <h2>ê²Œì„ ì¢…ë£Œ!</h2>
        <p>ìµœì¢… ì ìˆ˜: <span id="finalScore" class="score">0</span></p>
        <p>ë‹¬ì„± ë ˆë²¨: <span id="finalLevel" class="level">1</span></p>
        <button id="restartButton">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
      </div>
    </div>
    
    <div id="instructions" class="instructions" style="display: none;">
      <h3>ê²Œì„ ì„¤ëª…:</h3>
      <ul>
        <li>â™»ï¸ ì¬í™œìš©í’ˆ: í´ë¦­í•˜ë©´ +10ì </li>
        <li>ğŸ’¨ í’ë ¥: í´ë¦­í•˜ë©´ +8ì </li>
        <li>ğŸ’§ ë¬¼ ì ˆì•½: í´ë¦­í•˜ë©´ +5ì </li>
        <li>â˜€ï¸ íƒœì–‘ì—´: í´ë¦­í•˜ë©´ +15ì </li>
        <li>ğŸ—‘ï¸ ì“°ë ˆê¸°: í´ë¦­í•˜ë©´ -5ì , ë°”ë‹¥ì— ë–¨ì–´ì§€ë©´ +5ì </li>
      </ul>
    </div>
  </div>
  
  <script>
    // ê²Œì„ ìƒíƒœ ë³€ìˆ˜
    let score = 0;
    let time = 60;
    let level = 1;
    let gameActive = false;
    let items = [];
    let timerId;
    let moveTimerId;
    
    // ì•„ì´í…œ ìœ í˜•
    const itemTypes = [
      { type: 'trash', icon: 'ğŸ—‘ï¸', points: -5, name: 'ì“°ë ˆê¸°', class: 'trash' },
      { type: 'recycle', icon: 'â™»ï¸', points: 10, name: 'ì¬í™œìš©í’ˆ', class: 'recycle' },
      { type: 'wind', icon: 'ğŸ’¨', points: 8, name: 'í’ë ¥', class: 'wind' },
      { type: 'water', icon: 'ğŸ’§', points: 5, name: 'ë¬¼ ì ˆì•½', class: 'water' },
      { type: 'solar', icon: 'â˜€ï¸', points: 15, name: 'íƒœì–‘ì—´', class: 'solar' }
    ];
    
    // DOM ìš”ì†Œ
    const gameArea = document.getElementById('gameArea');
    const startScreen = document.getElementById('startScreen');
    const endScreen = document.getElementById('endScreen');
    const gameStats = document.getElementById('gameStats');
    const instructions = document.getElementById('instructions');
    const scoreValue = document.getElementById('scoreValue');
    const levelValue = document.getElementById('levelValue');
    const timeValue = document.getElementById('timeValue');
    const finalScore = document.getElementById('finalScore');
    const finalLevel = document.getElementById('finalLevel');
    const startButton = document.getElementById('startButton');
    const restartButton = document.getElementById('restartButton');
    
    // ê²Œì„ ì‹œì‘
    function startGame() {
      gameActive = true;
      score = 0;
      time = 60;
      level = 1;
      items = [];
      
      // í™”ë©´ ì´ˆê¸°í™”
      startScreen.style.display = 'none';
      endScreen.style.display = 'none';
      gameStats.style.display = 'flex';
      instructions.style.display = 'block';
      updateStats();
      
      // íƒ€ì´ë¨¸ ì‹œì‘
      startTimer();
      
      // ì²« ì•„ì´í…œ ìƒì„±
      createItem();
      
      // ì•„ì´í…œ ì´ë™ ì‹œì‘
      startMovingItems();
    }
    
    // ê²Œì„ ì¢…ë£Œ
    function endGame() {
      gameActive = false;
      clearInterval(timerId);
      clearInterval(moveTimerId);
      
      // ëª¨ë“  ì•„ì´í…œ ì œê±°
      removeAllItems();
      
      // ê²°ê³¼ í‘œì‹œ
      finalScore.textContent = score;
      finalLevel.textContent = level;
      endScreen.style.display = 'flex';
    }
    
    // íƒ€ì´ë¨¸ ì‹œì‘
    function startTimer() {
      timerId = setInterval(() => {
        time--;
        updateStats();
        
        if (time <= 0) {
          endGame();
        }
      }, 1000);
    }
    
    // í†µê³„ ì—…ë°ì´íŠ¸
    function updateStats() {
      scoreValue.textContent = score;
      levelValue.textContent = level;
      timeValue.textContent = time;
    }
    
    // ì•„ì´í…œ ìƒì„±
    function createItem() {
      if (!gameActive) return;
      
      const randomType = itemTypes[Math.floor(Math.random() * itemTypes.length)];
      const leftPosition = Math.floor(Math.random() * 80) + 10; // 10% ~ 90%
      
      // ì•„ì´í…œ ì—˜ë¦¬ë¨¼íŠ¸ ìƒì„±
      const itemElement = document.createElement('div');
      itemElement.className = `item ${randomType.class}`;
      itemElement.style.left = `${leftPosition}%`;
      itemElement.style.top = '-50px';
      
      const itemId = Date.now() + Math.random();
      itemElement.dataset.id = itemId;
      
      // ì•„ì´ì½˜ê³¼ ì´ë¦„ ì¶”ê°€
      itemElement.innerHTML = `
        <div class="icon">${randomType.icon}</div>
        <div class="item-name">${randomType.name}</div>
      `;
      
      // í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
      itemElement.addEventListener('click', () => {
        handleItemClick(itemId, randomType.points);
        gameArea.removeChild(itemElement);
      });
      
      // ê²Œì„ ì˜ì—­ì— ì¶”ê°€
      gameArea.appendChild(itemElement);
      
      // ì•„ì´í…œ ê°ì²´ ìƒì„±
      const newItem = {
        id: itemId,
        element: itemElement,
        points: randomType.points,
        type: randomType.type,
        speed: 1 + Math.random() * (level * 0.5)
      };
      
      items.push(newItem);
      
      // ë‹¤ìŒ ì•„ì´í…œ ìƒì„± ì˜ˆì•½
      const timeoutDelay = Math.max(500, 2000 - level * 200);
      setTimeout(() => {
        if (gameActive) createItem();
      }, timeoutDelay);
    }
    
    // ì•„ì´í…œ í´ë¦­ ì²˜ë¦¬
    function handleItemClick(id, points) {
      score += points;
      updateStats();
      
      // ì•„ì´í…œ ëª©ë¡ì—ì„œ ì œê±°
      items = items.filter(item => item.id !== id);
      
      // 10ì ë§ˆë‹¤ ë ˆë²¨ì—…
      if (score > 0 && score % 50 === 0) {
        level++;
        updateStats();
      }
    }
    
    // ì•„ì´í…œ ì´ë™ ì‹œì‘
    function startMovingItems() {
      moveTimerId = setInterval(() => {
        if (!gameActive) return;
        
        // ê° ì•„ì´í…œ ì´ë™
        items.forEach((item, index) => {
          const element = item.element;
          const currentTop = parseFloat(element.style.top);
          const newTop = currentTop + item.speed;
          element.style.top = `${newTop}px`;
          
          // ë°”ë‹¥ì— ë‹¿ì•˜ëŠ”ì§€ í™•ì¸
          const gameAreaHeight = gameArea.offsetHeight;
          if (newTop > gameAreaHeight - 50) {
            // ì•„ì´í…œì´ ë°”ë‹¥ì— ë‹¿ì•˜ì„ ë•Œ
            gameArea.removeChild(element);
            
            // ì“°ë ˆê¸°ê°€ ë°”ë‹¥ì— ë‹¿ìœ¼ë©´ ì ìˆ˜ ì¦ê°€
            if (item.type === 'trash') {
              score += Math.abs(item.points);
            } 
            // ë‹¤ë¥¸ ì•„ì´í…œì´ ë°”ë‹¥ì— ë‹¿ìœ¼ë©´ ì ìˆ˜ ê°ì†Œ
            else {
              score -= Math.abs(item.points);
            }
            updateStats();
            
            // ì•„ì´í…œ ëª©ë¡ì—ì„œ ì œê±°
            items.splice(index, 1);
          }
        });
      }, 50);
    }
    
    // ëª¨ë“  ì•„ì´í…œ ì œê±°
    function removeAllItems() {
      items.forEach(item => {
        if (item.element.parentNode === gameArea) {
          gameArea.removeChild(item.element);
        }
      });
      items = [];
    }
    
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    startButton.addEventListener('click', startGame);
    restartButton.addEventListener('click', startGame);
  </script>
</body>
</html>